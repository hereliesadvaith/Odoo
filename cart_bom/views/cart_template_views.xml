<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- To inherit cart products table  -->
        <template id="cart_lines_inherited" inherit_id="website_sale.cart_lines" name="Shopping Cart Lines (Inherited)">
            <xpath expr="//table[@id='cart_products']/thead/tr/th[2]" position="after">
                <th>Bill of Materials</th>
            </xpath>
            <xpath expr="//td[hasclass('td-product_name')]" position="after">
                <td class="cart_bom">
                    <t t-set="count" t-value="1"/>
                    <t t-foreach="bom_components" t-as="component">
                        <t t-if="line.product_id == component[1]">
                            <div>
                                <span t-esc="count"/>. <span t-esc="component[0]"/>
                            </div>
                        </t>
                        <t t-set="count" t-value="count + 1"/>
                    </t>
                </td>
            </xpath>
        </template>
    </data>
</odoo>
